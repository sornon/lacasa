<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#0b0f21">
<title>寻道大千 · 灵府主界面</title>
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="manifest" href="manifest.webmanifest">
<style>
  :root{
    --ink:#f2f6ff;
    --muted:rgba(210,224,255,.75);
    --panel:rgba(20,26,58,.68);
    --panel-strong:rgba(28,38,84,.82);
    --border:rgba(132,170,255,.28);
    --accent:#82d8ff;
    --accent-2:#9e7bff;
    --danger:#ff9acd;
    font-size:18px;
  }
  *, *::before, *::after{box-sizing:border-box;}
  html,body{height:100%;}
  body{
    margin:0;
    font-family:"SF Pro Display", "PingFang SC", "Microsoft YaHei", sans-serif;
    color:var(--ink);
    background:#0b0f21;
    overflow:hidden;
    position:relative;
    letter-spacing:.4px;
    -webkit-font-smoothing:antialiased;
  }
  body::before{
    content:"";
    position:fixed;
    inset:0;
    background:url("images/xundao-bg.svg") center/cover no-repeat;
    z-index:-2;
    filter:saturate(1.05);
  }
  body::after{
    content:"";
    position:fixed;
    inset:0;
    background:radial-gradient(circle at 20% 20%,rgba(120,180,255,.35),transparent 52%),
               radial-gradient(circle at 80% 18%,rgba(255,136,214,.25),transparent 54%),
               linear-gradient(130deg,rgba(24,36,78,.65),rgba(10,12,28,.2));
    mix-blend-mode:screen;
    z-index:-1;
  }
  .screen{
    position:relative;
    height:100%;
    display:flex;
    flex-direction:column;
    padding:clamp(20px,4vh,52px) clamp(24px,5vw,72px);
    gap:clamp(20px,3vh,36px);
  }
  .top-bar{
    display:flex;
    justify-content:space-between;
    align-items:flex-start;
    gap:clamp(18px,3vw,40px);
  }
  .profile-card{
    display:flex;
    align-items:center;
    gap:clamp(16px,2vw,24px);
    padding:clamp(16px,2.6vh,22px) clamp(22px,3vw,34px);
    border-radius:24px;
    background:var(--panel);
    border:1px solid var(--border);
    box-shadow:0 18px 36px rgba(7,11,32,.45);
    color:inherit;
    text-align:left;
    cursor:pointer;
    transition:transform .35s ease, box-shadow .35s ease;
    backdrop-filter:blur(16px);
    -webkit-backdrop-filter:blur(16px);
  }
  .profile-card:hover,.profile-card:focus-visible{
    transform:translateY(-4px);
    box-shadow:0 24px 46px rgba(30,40,96,.48);
  }
  .profile-card img{
    width:clamp(64px,10vw,88px);
    height:clamp(64px,10vw,88px);
    flex-shrink:0;
    border-radius:32px;
    border:2px solid rgba(154,214,255,.8);
    box-shadow:0 12px 28px rgba(64,132,255,.45);
  }
  .profile-info h2{
    margin:0;
    font-size:clamp(20px,2.8vw,28px);
    font-weight:700;
  }
  .profile-info .title{
    color:var(--accent);
    font-size:clamp(14px,2vw,18px);
    margin-top:4px;
  }
  .profile-stats{
    margin-top:10px;
    display:flex;
    flex-wrap:wrap;
    gap:14px;
    font-size:clamp(13px,1.6vw,17px);
    color:var(--muted);
  }
  .profile-stats span{
    display:flex;
    align-items:center;
    gap:6px;
    padding:4px 10px;
    border-radius:999px;
    background:rgba(80,114,204,.28);
    border:1px solid rgba(160,196,255,.24);
  }
  .events{
    display:flex;
    align-items:center;
    gap:clamp(12px,1.8vw,20px);
  }
  .event-icon{
    position:relative;
    width:clamp(58px,8vw,72px);
    height:clamp(58px,8vw,72px);
    border-radius:24px;
    border:1px solid rgba(150,192,255,.35);
    background:var(--panel-strong);
    color:var(--ink);
    display:grid;
    place-items:center;
    cursor:pointer;
    box-shadow:0 12px 24px rgba(16,22,52,.45);
    transition:transform .25s ease, box-shadow .25s ease;
    backdrop-filter:blur(12px);
    -webkit-backdrop-filter:blur(12px);
  }
  .event-icon svg{width:60%;height:60%;}
  .event-icon:hover,.event-icon:focus-visible{
    transform:translateY(-6px) scale(1.04);
    box-shadow:0 18px 36px rgba(46,66,136,.55);
  }
  .event-icon::after{
    content:attr(data-label);
    position:absolute;
    bottom:-32px;
    left:50%;
    transform:translateX(-50%);
    background:rgba(11,17,42,.78);
    border:1px solid rgba(140,186,255,.3);
    color:var(--muted);
    padding:4px 10px;
    border-radius:999px;
    font-size:13px;
    white-space:nowrap;
    opacity:0;
    pointer-events:none;
    transition:opacity .2s ease, transform .2s ease;
  }
  .event-icon:hover::after,
  .event-icon:focus-visible::after{
    opacity:1;
    transform:translate(-50%, -6px);
  }
  .hero-area{
    flex:1;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:clamp(24px,6vw,80px);
    pointer-events:none;
  }
  .hero-copy{
    max-width:520px;
    pointer-events:auto;
  }
  .hero-copy .tagline{
    margin:0 0 12px;
    font-size:clamp(16px,2.2vw,20px);
    color:var(--accent);
    letter-spacing:.6px;
  }
  .hero-copy h1{
    margin:0;
    font-size:clamp(34px,5vw,54px);
    font-weight:700;
    line-height:1.15;
    text-shadow:0 8px 22px rgba(12,20,48,.58);
  }
  .hero-copy p{
    margin:18px 0 0;
    font-size:clamp(16px,2.4vw,19px);
    color:var(--muted);
    line-height:1.7;
  }
  .hero-actions{
    margin-top:26px;
    display:flex;
    gap:16px;
    pointer-events:auto;
  }
  .hero-actions .btn{
    padding:12px 26px;
    border-radius:999px;
    border:1px solid rgba(138,206,255,.42);
    background:linear-gradient(120deg,rgba(64,132,255,.62),rgba(148,101,255,.58));
    color:#fff;
    font-size:16px;
    font-weight:600;
    cursor:pointer;
    box-shadow:0 12px 28px rgba(60,108,198,.52);
    transition:transform .25s ease, box-shadow .25s ease;
  }
  .hero-actions .btn.secondary{
    background:rgba(20,32,68,.7);
    border-color:rgba(128,178,255,.32);
    box-shadow:0 10px 24px rgba(12,20,48,.55);
  }
  .hero-actions .btn:hover,.hero-actions .btn:focus-visible{
    transform:translateY(-3px);
    box-shadow:0 18px 36px rgba(62,122,230,.6);
  }
  .hero-figure{
    position:relative;
    flex:1;
    display:flex;
    justify-content:center;
    align-items:flex-end;
    min-height:340px;
    pointer-events:none;
  }
  .hero-figure::before{
    content:"";
    position:absolute;
    bottom:0;
    width:72%;
    max-width:420px;
    aspect-ratio:1/0.26;
    background:radial-gradient(circle at 50% 50%,rgba(40,72,160,.72),rgba(6,10,24,0));
    filter:blur(2px);
    transform:translateY(30px);
  }
  .character-glow{
    position:absolute;
    inset:auto;
    bottom:12%;
    width:88%;
    max-width:520px;
    aspect-ratio:1/1.32;
    background:radial-gradient(circle at 40% 20%,rgba(130,240,255,.45),rgba(40,60,150,.18) 60%, rgba(12,20,46,0) 100%);
    filter:blur(0px);
    animation:breath 6s ease-in-out infinite;
  }
  .hero-character{
    width:88%;
    max-width:520px;
    pointer-events:none;
    animation:float 8s ease-in-out infinite;
  }
  .hero-character img{
    width:100%;
    height:auto;
    display:block;
    filter:drop-shadow(0 22px 40px rgba(18,24,56,.72));
  }
  @keyframes float{
    0%,100%{transform:translateY(0px);} 50%{transform:translateY(-18px);}
  }
  @keyframes breath{
    0%,100%{transform:scale(0.96);} 50%{transform:scale(1.05);}
  }
  .bottom-nav{
    margin-top:auto;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:14px;
    padding:16px clamp(18px,4vw,36px);
    border-radius:28px;
    background:rgba(12,16,38,.78);
    border:1px solid rgba(108,156,255,.26);
    box-shadow:0 24px 48px rgba(6,10,24,.6);
    backdrop-filter:blur(18px);
    -webkit-backdrop-filter:blur(18px);
  }
  .nav-item{
    flex:1;
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:8px;
    border:none;
    background:none;
    color:var(--muted);
    cursor:pointer;
    padding:10px 8px;
    border-radius:18px;
    transition:background .25s ease, color .25s ease, transform .25s ease;
  }
  .nav-item svg{width:26px;height:26px;fill:currentColor;opacity:.8;}
  .nav-item span{font-size:13px;}
  .nav-item.active, .nav-item:hover, .nav-item:focus-visible{
    background:linear-gradient(135deg,rgba(88,140,255,.38),rgba(158,121,255,.44));
    color:#fff;
    transform:translateY(-2px);
  }
  .event-panel{
    position:absolute;
    top:clamp(120px,16vh,200px);
    right:clamp(28px,6vw,120px);
    width:min(320px,58vw);
    padding:18px 22px;
    border-radius:20px;
    background:rgba(20,30,70,.88);
    border:1px solid rgba(130,186,255,.32);
    box-shadow:0 18px 38px rgba(10,14,32,.55);
    backdrop-filter:blur(14px);
    -webkit-backdrop-filter:blur(14px);
    opacity:0;
    transform:translateY(-12px);
    transition:opacity .35s ease, transform .35s ease;
    pointer-events:none;
    color:var(--muted);
  }
  .event-panel.show{
    opacity:1;
    transform:translateY(0);
  }
  .event-panel strong{
    display:block;
    color:var(--ink);
    font-size:18px;
    margin-bottom:6px;
  }
  .event-panel p{margin:0;font-size:15px;line-height:1.6;}
  .modal-backdrop{
    position:fixed;
    inset:0;
    background:rgba(6,8,18,.78);
    backdrop-filter:blur(10px);
    -webkit-backdrop-filter:blur(10px);
    opacity:0;
    transition:opacity .3s ease;
    z-index:40;
  }
  .profile-modal{
    position:fixed;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:50;
    opacity:0;
    pointer-events:none;
    transition:opacity .3s ease;
  }
  .profile-modal .modal-card{
    width:min(520px,86vw);
    background:rgba(12,16,38,.92);
    border:1px solid rgba(128,176,255,.32);
    border-radius:28px;
    box-shadow:0 32px 56px rgba(4,8,20,.65);
    padding:28px;
    color:var(--ink);
    transform:translateY(24px);
    transition:transform .3s ease;
    backdrop-filter:blur(18px);
    -webkit-backdrop-filter:blur(18px);
  }
  .profile-modal.show{opacity:1;pointer-events:auto;}
  .profile-modal.show .modal-card{transform:translateY(0);}
  .modal-backdrop.show{opacity:1;}
  .modal-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:16px;
  }
  .modal-header h2{margin:0;font-size:24px;}
  .modal-header button{
    border:none;
    background:none;
    color:var(--muted);
    cursor:pointer;
    font-size:16px;
    padding:4px 8px;
  }
  .modal-body{margin-top:18px;line-height:1.8;color:var(--muted);font-size:16px;}
  .modal-body dl{margin:16px 0 0;display:grid;grid-template-columns:140px 1fr;row-gap:12px;column-gap:18px;}
  .modal-body dt{color:var(--ink);}
  .modal-body dd{margin:0;}
  .modal-footer{margin-top:24px;display:flex;justify-content:flex-end;}
  .modal-footer .btn{
    padding:10px 20px;
    border-radius:999px;
    border:1px solid rgba(130,186,255,.36);
    background:rgba(20,32,72,.72);
    color:var(--ink);
    cursor:pointer;
  }
  .modal-footer .btn:hover,.modal-footer .btn:focus-visible{
    background:linear-gradient(120deg,rgba(92,148,255,.4),rgba(156,112,255,.5));
  }
  @media (max-width:960px){
    .hero-area{flex-direction:column;align-items:flex-start;}
    .hero-figure{align-self:center;}
    .screen{padding:22px 20px 32px;}
    .top-bar{flex-direction:column;align-items:stretch;}
    .events{align-self:flex-end;}
    .event-panel{position:relative;top:auto;right:auto;width:100%;}
  }
  @media (max-width:600px){
    :root{font-size:17px;}
    body{overflow:hidden;}
    .profile-card{width:100%;}
    .events{align-self:flex-start;}
    .event-icon::after{display:none;}
    .hero-area{gap:18px;}
    .bottom-nav{padding:14px 18px;}
    .nav-item span{font-size:12px;}
    .modal-body dl{grid-template-columns:1fr;}
  }
  @media (prefers-reduced-motion:reduce){
    *,*::before,*::after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important;scroll-behavior:auto!important;}
  }
</style>
</head>
<body>
<div class="screen">
  <header class="top-bar">
    <button class="profile-card" id="profileBtn" type="button" aria-haspopup="dialog" aria-controls="profileModal">
      <img src="images/avatar-immortal.svg" alt="灵主头像">
      <div class="profile-info">
        <h2>云湛子</h2>
        <div class="title">无极天宫 · 第十三代掌教</div>
        <div class="profile-stats">
          <span>境界 · 太虚圆满</span>
          <span>灵根 · 三灵同辉</span>
          <span>功德 · 184,520</span>
        </div>
      </div>
    </button>
    <div class="events" aria-label="当前活动">
      <button class="event-icon" type="button" data-label="悟道试炼" data-title="悟道试炼" data-desc="九重灵塔限时开放，完成试炼可收集稀有道韵。" aria-describedby="eventPanel">
        <svg viewBox="0 0 64 64" aria-hidden="true"><path d="M32 6L10 18v28l22 12 22-12V18L32 6zm0 6.6 14 7.6v18.2L32 46l-14-7.6V20.2L32 12.6z" fill="currentColor"/><path d="M32 20l-8 12h6v12h4V32h6L32 20z" fill="currentColor"/></svg>
      </button>
      <button class="event-icon" type="button" data-label="宗门盛典" data-title="宗门盛典" data-desc="本周宗门庆典加开，参与可为弟子提升全属性10%。" aria-describedby="eventPanel">
        <svg viewBox="0 0 64 64" aria-hidden="true"><path d="M12 14h40l-6 32H18l-6-32z" fill="currentColor" opacity="0.72"/><path d="M24 12a8 8 0 0 1 16 0h8v8H16v-8h8z" fill="currentColor"/></svg>
      </button>
      <button class="event-icon" type="button" data-label="灵宠入世" data-title="灵宠入世" data-desc="限时召唤灵宠，签订契约后即可解锁新随从动画。" aria-describedby="eventPanel">
        <svg viewBox="0 0 64 64" aria-hidden="true"><path d="M20 20c0-8 6-14 12-14s12 6 12 14c6 0 10 6 10 12s-4 12-10 12H20c-6 0-10-6-10-12s4-12 10-12z" fill="currentColor"/><circle cx="26" cy="26" r="4" fill="#0b0f21"/><circle cx="38" cy="26" r="4" fill="#0b0f21"/><path d="M24 38c2 4 6 6 8 6s6-2 8-6" stroke="#0b0f21" stroke-width="3" stroke-linecap="round" fill="none"/></svg>
      </button>
    </div>
  </header>

  <div class="event-panel" id="eventPanel" role="status" aria-live="polite" aria-hidden="true"></div>

  <section class="hero-area" aria-label="灵府概览">
    <div class="hero-copy">
      <p class="tagline">灵府波动 · 天道回应</p>
      <h1>寻道大千 · 灵府总览</h1>
      <p>四海三界灵脉汇聚，九霄星辉护佑。掌教可在此掌控宗门脉络，调遣弟子，洞察天机，俯瞰万象。</p>
      <div class="hero-actions">
        <button class="btn" type="button">进入灵府</button>
        <button class="btn secondary" type="button">观测星图</button>
      </div>
    </div>
    <div class="hero-figure" aria-hidden="true">
      <div class="character-glow"></div>
      <div class="hero-character">
        <img src="images/xundao-character.svg" alt="云湛子立于灵光之中">
      </div>
    </div>
  </section>

  <nav class="bottom-nav" aria-label="主功能导航">
    <button class="nav-item active" type="button">
      <svg viewBox="0 0 64 64" aria-hidden="true"><path d="M32 10 8 28v24h16V38h16v14h16V28L32 10z"/></svg>
      <span>洞天</span>
    </button>
    <button class="nav-item" type="button">
      <svg viewBox="0 0 64 64" aria-hidden="true"><path d="M10 46c4-12 12-22 22-22s18 10 22 22H10z"/><path d="M24 18a8 8 0 0 1 16 0v6H24v-6z"/></svg>
      <span>炼阁</span>
    </button>
    <button class="nav-item" type="button">
      <svg viewBox="0 0 64 64" aria-hidden="true"><path d="M12 20h40v28H12z"/><path d="M20 16V8h8v8" fill="currentColor"/><path d="M36 16V8h8v8" fill="currentColor"/></svg>
      <span>宗门</span>
    </button>
    <button class="nav-item" type="button">
      <svg viewBox="0 0 64 64" aria-hidden="true"><path d="M32 12a20 20 0 1 0 0 40 20 20 0 0 0 0-40zm0 8a4 4 0 1 1 0 8 4 4 0 0 1 0-8zm0 24a12 12 0 0 1-10-6c.2-4 6-6 10-6s9.8 2 10 6a12 12 0 0 1-10 6z"/></svg>
      <span>灵仆</span>
    </button>
    <button class="nav-item" type="button">
      <svg viewBox="0 0 64 64" aria-hidden="true"><path d="M34 12h16l2 10H34zM12 18h16v10H14zM36 32h16v10H34zM12 36h16l2 10H12z"/></svg>
      <span>传承</span>
    </button>
  </nav>
</div>

<div class="modal-backdrop" id="profileBackdrop" hidden></div>
<section class="profile-modal" id="profileModal" role="dialog" aria-modal="true" aria-labelledby="profileTitle" hidden>
  <div class="modal-card">
    <header class="modal-header">
      <h2 id="profileTitle">云湛子 · 掌教档案</h2>
      <button type="button" id="closeProfile" aria-label="关闭档案">关闭</button>
    </header>
    <div class="modal-body">
      <p>天元历三万四千年，云湛子于九霄雷海悟道飞升，现坐镇无极天宫。其下八万弟子，三千护法，百灵护宗。掌控浮光灵阵，可调动十二重天星辰之力。</p>
      <dl>
        <dt>功法</dt>
        <dd>《太虚归一诀》 · 《星瀚流光篇》</dd>
        <dt>灵器</dt>
        <dd>镇界天衍盘 · 玄穹万象扇</dd>
        <dt>弟子总数</dt>
        <dd>核心弟子 128 名 · 外门弟子 32,480 名</dd>
        <dt>宗门盟友</dt>
        <dd>昆仑仙域 · 飞霞古宗 · 北辰剑阁</dd>
      </dl>
    </div>
    <footer class="modal-footer">
      <button class="btn" type="button" id="closeProfileFooter">收起灵识</button>
    </footer>
  </div>
</section>

<script>
  const profileBtn = document.getElementById('profileBtn');
  const profileModal = document.getElementById('profileModal');
  const profileBackdrop = document.getElementById('profileBackdrop');
  const closeProfileBtn = document.getElementById('closeProfile');
  const closeProfileFooter = document.getElementById('closeProfileFooter');
  const eventPanel = document.getElementById('eventPanel');
  const eventButtons = document.querySelectorAll('.event-icon');
  const navItems = document.querySelectorAll('.nav-item');
  let hideEventTimer = null;

  function openProfile(){
    profileModal.hidden = false;
    profileBackdrop.hidden = false;
    requestAnimationFrame(() => {
      profileModal.classList.add('show');
      profileBackdrop.classList.add('show');
    });
  }

  function closeProfile(){
    profileModal.classList.remove('show');
    profileBackdrop.classList.remove('show');
    const prefersReduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    if(prefersReduce){
      profileModal.hidden = true;
      profileBackdrop.hidden = true;
    }else{
      const finish = () => {
        clearTimeout(fallback);
        profileModal.hidden = true;
        profileBackdrop.hidden = true;
      };
      const fallback = setTimeout(finish, 320);
      profileModal.addEventListener('transitionend', finish, {once:true});
    }
  }

  profileBtn.addEventListener('click', openProfile);
  closeProfileBtn.addEventListener('click', closeProfile);
  closeProfileFooter.addEventListener('click', closeProfile);
  profileBackdrop.addEventListener('click', closeProfile);
  document.addEventListener('keydown', evt => {
    if(evt.key === 'Escape' && !profileModal.hidden){
      closeProfile();
    }
  });

  eventButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      const title = btn.dataset.title;
      const desc = btn.dataset.desc;
      eventPanel.innerHTML = `<strong>${title}</strong><p>${desc}</p>`;
      eventPanel.classList.add('show');
      eventPanel.setAttribute('aria-hidden', 'false');
      clearTimeout(hideEventTimer);
      hideEventTimer = setTimeout(() => {
        eventPanel.classList.remove('show');
        eventPanel.setAttribute('aria-hidden', 'true');
      }, 3600);
    });
  });

  navItems.forEach(item => {
    item.addEventListener('click', () => {
      navItems.forEach(other => other.classList.remove('active'));
      item.classList.add('active');
    });
  });
</script>
</body>
</html>
